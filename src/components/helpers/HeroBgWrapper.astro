---
import type { ImageMetadata } from "astro";
import { getImage } from "astro:assets";
const { imagePath, class: className } = Astro.props;

const importedImage = `/src/assets/images/${imagePath}`;

const images = import.meta.glob<{ default: ImageMetadata }>("/src/assets/images/*.{jpeg,jpg,png,gif,webp}");
if (!images[importedImage]) throw new Error(`"${importedImage}" does not exist in glob: "src/assets/images/*.{jpeg,jpg,png,gif,webp}"`);

const optimizedBackground = await getImage({
  src: images[importedImage](),
  format: "webp",
});
---

<section style={`background-image: url(${optimizedBackground.src});`} class={className}>
  <slot />
</section>

<style>
  @layer components {
    section {
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      width: 100%;
      height: 600px;
      /* Remove outer padding so we can align to a centered 1200px container */
      padding: 0;
      color: #181818;
      display: flex;
      align-items: center;

      header {
        /* Center a 1276px-wide container with consistent side padding */
        max-width: 1276px;
        width: 100%;
        margin: 0 auto;
        padding: 0 38px;

        /* Card */
        > div {
          border-radius: 29px;
          background: rgba(255, 255, 255, 0.85);
          backdrop-filter: blur(5.5px);
          display: inline-flex;
          padding: 48px 60px 58px 60px;
          flex-direction: column;
          align-items: flex-start;
          align-self: flex-start;
          gap: 10px;
          max-width: 1200px;
          width: fit-content;

          p {
            background-color: #ffcc4a;
            padding: 0 15px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 2.32px;
          }
        }
      }
    }
  }
</style>
